name: Upload Release Artifact Executable Linux

on:
  push:
    # Sequence of patterns matched against refs/tags
    tags:
    - 'v*' # Push events to matching v*, i.e. v1.0, v20.15.10

jobs:
#  build-binary-executable:
#
#    runs-on: ubuntu-latest
#
#    steps:
#      - uses: actions/checkout@v1
#
#      - name: Cache maven deps
#        uses: actions/cache@v1
#        with:
#          path: ~/.m2/repository
#          key: ${{ runner.os }}-maven-native-${{ hashFiles('**/deps.edn') }}
#          restore-keys: |
#            ${{ runner.os }}-maven-native-
#
#      - name: setup-graalvm-ce
#        uses: rinx/setup-graalvm-ce@v0.0.1
#        with:
#          graalvm-version: "20.1.0"
#          java-version: "java11"
#
#      - name: setup-native-image
#        run: |
#          gu install native-image
#
#      - name: Install clojure tools-deps
#        uses: DeLaGuardo/setup-clojure@master
#        with:
#          tools-deps: 1.10.1.469
#
#      - name: Compile native binary
#        run: |
#          clojure -A:native-ket
#          tar zcvf ket-linux.tar.gz ket
#
#      - name: Create Release
#        id: create_release
#        uses: actions/create-release@v1
#        env:
#          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
#        with:
#          tag_name: ${{ github.ref }}
#          release_name: Release ${{ github.ref }}
#          draft: false
#          prerelease: false
#      - name: Upload Release Asset
#        id: upload-release-asset
#        uses: actions/upload-release-asset@v1
#        env:
#          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
#        with:
#          upload_url: ${{ steps.create_release.outputs.upload_url }} # This pulls from the CREATE RELEASE step above, referencing it's ID to get its outputs object, which include a `upload_url`. See this blog post for more info: https://jasonet.co/posts/new-features-of-github-actions/#passing-data-to-future-steps
#          asset_path: ./ket-linux.tar.gz
#          asset_name: ket-linux.tar.gz
#          asset_content_type: application/octet-stream
